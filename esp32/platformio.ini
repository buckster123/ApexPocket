; CLAUDEAGOTCHI - PlatformIO Configuration
;
; Build commands:
;   pio run -e oled        # Build for OLED variant
;   pio run -e round       # Build for Round TFT variant
;   pio run -e native      # Build for native (desktop) testing
;
; Upload:
;   pio run -e oled -t upload
;
; Monitor:
;   pio device monitor

[platformio]
default_envs = oled

[env]
platform = espressif32
board = seeed_xiao_esp32s3
framework = arduino
monitor_speed = 115200
upload_speed = 921600

; Common libraries
lib_deps =
    bblanchon/ArduinoJson@^6.21.0

; File system
board_build.filesystem = littlefs
board_build.partitions = default_8MB.csv

; ==================== OLED VARIANT ====================
[env:oled]
build_flags =
    -D DISPLAY_TYPE_OLED
    -D OLED_WIDTH=128
    -D OLED_HEIGHT=64

lib_deps =
    ${env.lib_deps}
    adafruit/Adafruit SSD1306@^2.5.7
    adafruit/Adafruit GFX Library@^1.11.5

; ==================== ROUND TFT VARIANT ====================
[env:round]
build_flags =
    -D DISPLAY_TYPE_ROUND
    -D TFT_WIDTH=240
    -D TFT_HEIGHT=240

lib_deps =
    ${env.lib_deps}
    lovyan03/LovyanGFX@^1.1.8

; ==================== NATIVE (Desktop Testing) ====================
[env:native]
platform = native
build_flags =
    -D NATIVE_BUILD
    -D UNIT_TEST
    -std=c++17

lib_deps =

; Test source
test_build_src = yes
